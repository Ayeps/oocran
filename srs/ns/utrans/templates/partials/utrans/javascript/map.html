<script>
function initialize() {
  var dynamicColors = function() {
      var r = Math.floor(Math.random() * 255);
      var g = Math.floor(Math.random() * 255);
      var b = Math.floor(Math.random() * 255);
      return "rgb(" + r + "," + g + "," + b + ")";
  }
  var options = {
    center:new google.maps.LatLng({{scenario.latitude}},{{scenario.longitude}}),
    zoom:18,
    disableDefaultUI: true,
    scrollwheel: false,
    draggable: false,
    mapTypeId: google.maps.MapTypeId.MAP,
  };
  var map=new google.maps.Map(document.getElementById("map-canvas"),options);

  {% for rrh in scenario.get_rrhs %}
    var {{rrh.name}} = new google.maps.Marker({
      position: {
        lat: {{rrh.latitude}},
        lng: {{rrh.longitude}}
      },
      icon: 'https://maps.gstatic.com/mapfiles/ms2/micons/blue-pushpin.png',
      draggable: true,
      map:map
    });
    {{rrh.name}}.addListener('click', function() {
      var infoWindow = new google.maps.InfoWindow({
          content: '<h6>IP: {{rrh.ip}}</h6><h6>First Band: {{rrh.first_band}}</h6><h6>Second Band: {{rrh.second_band}}</h6><h6>Third Band: {{rrh.third_band}}</h6>'
      });
      infoWindow.open(map,{{rrh.name}});
    });
      var {{rrh.name}}_circle = new google.maps.Circle({
        map: map,
        radius: {{rrh.pt}},    // 10 miles in metres

      });

    {{rrh.name}}_circle.bindTo('center', {{rrh.name}}, 'position');
  {%endfor%}
}
google.maps.event.addDomListener(window, 'load', initialize);
</script>